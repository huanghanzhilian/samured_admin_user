define(["app"],function(app){app.registerDirective("jrDropdownButton",[function(){function setDisplayName($scope){if($scope.selected)$scope.displayName=$scope.selected.name||$scope.selected;else if($scope.options)if($scope.value)for(var i=0;i<$scope.options.length;i++)$scope.options[i].value===$scope.value&&($scope.displayName=$scope.options[i].name);else $scope.displayName=$scope.options[0].name||$scope.options[0],$scope.value="undefined"==typeof $scope.options[0].value?$scope.options[0]:$scope.options[0].value}function setSelected($scope,iAttrs,option){$scope.displayName=option.name||option,iAttrs.selected&&($scope.selected=option),iAttrs.value&&($scope.value=option.value||void 0)}return{restrict:"E",replace:!0,template:'<div class="btn-group dropdown-btn">\r\n    <button type="button" class="btn dropdown-toggle {{theme || \'btn-default\'}}" data-toggle="dropdown" ng-disabled="disabled">\r\n        <span class="displayName">{{displayName}}</span>\r\n        <span class="caret"></span>\r\n    </button>\r\n    <ul class="dropdown-menu" role="menu">\r\n        <li ng-repeat="option in options"><a ng-click="select(option)">{{option.name || option}}</a></li>\r\n    </ul>\r\n</div>',scope:{theme:"@",options:"=",selected:"=",value:"=",disabled:"="},link:function($scope,iElement,iAttrs){$scope.$watch("options",function(){setDisplayName($scope)}),setDisplayName($scope),$scope.select=function(option){var _displayName=option.name||option;return _displayName===$scope.displayName?!1:void setSelected($scope,iAttrs,option)},$scope.$watch("value",function(newValue){if(void 0===newValue&&(newValue=""),$scope.options)for(var i=0;i<$scope.options.length;i++)$scope.options[i].value===newValue&&($scope.displayName=$scope.options[i].name)})}}}])});