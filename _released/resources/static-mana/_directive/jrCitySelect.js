define(["app","dict.cities","directive/jrDropdownButtonNew"],function(app,citiesModule){app.registerDirective("jrCitySelect",function(){return{restrict:"EA",replace:!0,template:'\r\n<div class="jr-city-select-wrap">\r\n    <div class="jr-city-select-item">\r\n        <jr-dropdown-button-new options="queryOptions.provinces" value="province" placeholdertext="省" disabled="disabled"></jr-dropdown-button-new>\r\n    </div>\r\n    <div class="jr-city-select-item" style="margin-left: 10px;" ng-if="colspan>1">\r\n        <jr-dropdown-button-new options="queryOptions.cities" value="city" placeholdertext="市" disabled="disabled"></jr-dropdown-button-new>\r\n    </div>\r\n    <div class="jr-city-select-item" style="margin-left: 10px;" ng-if="colspan>2">\r\n        <jr-dropdown-button-new options="queryOptions.districts" value="district" placeholdertext="区县" disabled="disabled"></jr-dropdown-button-new>\r\n    </div>\r\n</div>',scope:{province:"=",city:"=",district:"=",colspan:"=",disabled:"="},link:function($scope){$scope.queryOptions={provinces:citiesModule.get_provinces_from_dict()};var echoFlag=!1;($scope.province||$scope.city||$scope.district)&&(echoFlag=!0),$scope.colspan>1&&$scope.$watch("province",function(){$scope.queryOptions.cities=citiesModule.get_cities_by_code_from_dict($scope.province),echoFlag||($scope.city="")}),$scope.colspan>2&&$scope.$watch("city",function(){return $scope.queryOptions.districts=citiesModule.get_districts_by_code_from_dict($scope.city),echoFlag?void(echoFlag=!1):void($scope.district="")})}}})});