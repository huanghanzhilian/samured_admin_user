define(["app","directive/jrDatepicker","directive/jrDropdownButton","directive/jrPlaceholder","angular-upload-file","directive/ngThumb"],function(app){app.registerController("CtrlOrderCheckV4",["$scope","$rootScope","$http","$modal","$stateParams","$filter","$state","$sce","FileUploader","FileItem","$timeout",function($scope,$rootScope,$http,$modal,$stateParams){$scope.orderId=$stateParams.orderId,$scope.flagIndex=$stateParams.flag,$scope.tabData={audit:!1,reaudit:!1,auditPage:!1,reauditPage:!1},1==$scope.flagIndex&&($scope.tabData.audit=!0),4==$scope.flagIndex&&($scope.tabData.audit=!0,$scope.tabData.auditPage=!0),$scope.userInfoInit=function(){$http.get("/manage/public/json/get/userinfoAudit",{params:{orderId:$stateParams.orderId,optDesc:"用户信息"}}).success(function(data){$scope.userInfo=data.object})},$scope.auditInit=function(){$http.get("/manage/public/json/get/orderLogInfo",{params:{orderId:$stateParams.orderId,optDesc:"审核信息"}}).success(function(data){$scope.LogInfo=data.object})},$scope.auditData={orderId:$stateParams.orderId,checkMemo:""},$scope.manualSubmit=function(mes){return 0!=mes||$scope.auditData.checkMemo?($scope.auditData.checkResult=mes,void(window.confirm("您确定进入提交评审吗？")&&$http.get("/manage/order-v4/json/operate/humanCheckOrder",{params:$.extend({},$scope.auditData,{optDesc:"审核结果提交"})}).success(function(){window.close(),window.opener.location.reload()}))):void alert("请输入批注信息！")},$scope.manualQuit=function(){window.close()}}])});