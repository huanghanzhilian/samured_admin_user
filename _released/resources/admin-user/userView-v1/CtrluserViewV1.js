define(["app","dict.cities","angular-upload-file","directive/jrDatepicker","directive/jrDropdownButton","directive/jrPlaceholder","angular-upload-file","directive/ngThumb","directive/fileModel"],function(app){app.registerController("CtrluserViewV1",["$scope","$rootScope","$http","$modal","$stateParams","$filter","$state","$sce","FileUploader","FileItem","$timeout",function($scope,$rootScope,$http,$modal,$stateParams){function getData(params){$http.get("/api/video/userInfo",{params:$.extend({},params,{optDesc:"视频管理"})}).success(function(data){$scope.orders=data.object,$scope.resCode=data.resCode})}$scope.queryParams=$.extend({pageNum:1,pageSize:10},$stateParams),$scope.queryOptions={orderStatus:[{name:"全部",value:""},{name:"已发布",value:"6000"},{name:"待处理",value:"6100"}]},$scope.isEditStatus=!1,$scope.edit=function(){$scope.isEditStatus=!$scope.isEditStatus},$scope.cancel=function(){$scope.isEditStatus=!1},$scope.orders={pageNum:1,pageSize:10},$http.get("/uptoken",{}).success(function(data){$scope.uptoken=data.uptoken}),getData($scope.queryParams),$scope.reader=new FileReader,$scope.thumb="",$scope.img_upload=function(files){$scope.thumb="",$scope.guid=(new Date).valueOf(),$scope.reader.readAsDataURL(files[0]),$scope.reader.onload=function(ev){$scope.$apply(function(){$scope.thumb=ev.target.result})};var data=new FormData;data.append("file",files[0]),data.append("key",$scope.guid),data.append("token",$scope.uptoken),$http({method:"post",url:"http://upload.qiniu.com/",data:data,headers:{"Content-Type":void 0},transformRequest:angular.identity}).success(function(data){data&&alert("成功："+JSON.stringify(res))})},$scope.readera=new FileReader,$scope.thumb="",$scope.img_uploada=function(files){$scope.thumba="",$scope.readera.readAsDataURL(files[0]),$scope.readera.onload=function(ev){$scope.$apply(function(){$scope.thumba=ev.target.result})}},$scope.$watch("fileToUpload",function(){})}])});