define(["app"],function(app){app.registerDirective("uiSelect",[function(){function setDisplayName($scope,iElement){if($scope.selected)$scope.displayName=$scope.selected.name||$scope.selected,iElement.addClass("ui-selected");else if($scope.options)if($scope.value)for(var i=0;i<$scope.options.length;i++)$scope.options[i].value==$scope.value&&($scope.displayName=$scope.options[i].name,iElement.addClass("ui-selected"));else $scope.displayName=$scope.options[0].name||$scope.options[0]}function setSelected($scope,iAttrs,option){$scope.displayName=option.name||option,iAttrs.selected&&($scope.selected=option),iAttrs.value&&($scope.value=option.value||void 0)}return{restrict:"E",replace:!0,template:'<div class="btn-group ui-select">\r\n    <button type="button" class="btn {{theme || \'btn-default\'}} dropdown-toggle" data-toggle="dropdown" ng-disabled="disabled">\r\n        <span class="text" style="width:{{innerwidth}};">{{displayName}}</span>\r\n        <span class="ui-icon"><span class="caret"></span></span>\r\n        \r\n    </button>\r\n    <ul class="dropdown-menu" role="menu">\r\n        <li ng-repeat="option in options"><a ng-click="selcet(option)">{{option.name || option}}</a></li>\r\n    </ul>\r\n</div>',scope:{theme:"@",options:"=",selected:"=",value:"=",disabled:"=",innerwidth:"@",onchange:"&"},link:function($scope,iElement,iAttrs){$scope.$watch("options",function(){setDisplayName($scope,iElement)}),setDisplayName($scope,iElement),$scope.selcet=function(option){var _displayName=option.name||option;return _displayName===$scope.displayName?!1:(0==option.value?iElement.removeClass("ui-selected"):iElement.addClass("ui-selected"),setSelected($scope,iAttrs,option),void $scope.onchange({args:option}))}}}}])});