define(["app"],function(app){app.registerDirective("jrDropdownButtonNew",[function(){function setDisplayName($scope){if($scope.selected)$scope.displayName=$scope.selected.name||$scope.selected;else if($scope.options)if($scope.value)for(var i=0;i<$scope.options.length;i++)$scope.options[i].value===$scope.value&&($scope.displayName=$scope.options[i].name);else $scope.displayName=""}function setSelected($scope,iAttrs,option){$scope.displayName=option.name||option,iAttrs.selected&&($scope.selected=option),iAttrs.value&&($scope.value=option.value||void 0)}return{restrict:"E",replace:!0,template:'<div class="btn-group dropdown-btn">\r\n    <button type="button" class="btn dropdown-toggle {{theme || \'btn-default\'}}" data-toggle="dropdown" ng-disabled="disabled">\r\n        <input class="display-input" value="{{displayName}}" placeholder="{{placeholdertext}}" disabled>\r\n        <span class="caret"></span>\r\n    </button>\r\n    <ul class="dropdown-menu" role="menu" ng-if="options.length>0">\r\n        <li ng-repeat="option in options"><a title="{{option.name || option}}" ng-click="selcet(option)">{{option.name || option}}</a></li>\r\n    </ul>\r\n</div>',scope:{theme:"@",options:"=",selected:"=",value:"=",disabled:"=",placeholdertext:"@"},link:function($scope,iElement,iAttrs){$scope.$watch("options",function(){setDisplayName($scope)}),setDisplayName($scope),$scope.selcet=function(option){var _displayName=option.name||option;return _displayName===$scope.displayName?!1:void setSelected($scope,iAttrs,option)}}}}])});